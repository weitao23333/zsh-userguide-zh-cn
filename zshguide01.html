
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>章节 1 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="zshguide02.html" />
    
    
    <link rel="prev" href="zshguide.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="zshguide.html">
            
                <a href="zshguide.html">
            
                    
                    目录
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="zshguide01.html">
            
                <a href="zshguide01.html">
            
                    
                    章节 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="zshguide02.html">
            
                <a href="zshguide02.html">
            
                    
                    章节 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="zshguide03.html">
            
                <a href="zshguide03.html">
            
                    
                    章节 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="zshguide04.html">
            
                <a href="zshguide04.html">
            
                    
                    章节 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="zshguide05.html">
            
                <a href="zshguide05.html">
            
                    
                    章节 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="zshguide06.html">
            
                <a href="zshguide06.html">
            
                    
                    章节 6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="zshguide07.html">
            
                <a href="zshguide07.html">
            
                    
                    章节 7
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="zshguide08.html">
            
                <a href="zshguide08.html">
            
                    
                    章节 8
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >章节 1</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <hr>
<ul>
<li><a href="zshguide.html">Table of Contents</a></li>
<li><a href="zshguide02.html">Next Chapter</a></li>
</ul>
<hr>
<p>[]{#intro}[]{#l1}</p>
<h1 id="chapter-1-a-short-introduction">Chapter 1: A short introduction</h1>
<p>The Z-Shell, `zsh\&apos; for short, is a command interpreter for UNIX
systems, or in UNIX jargon, a `shell\&apos;, because it wraps around the
commands you use. More than that, however, zsh is a particularly
powerful shell --- and it\&apos;s free, and under regular maintenance ---
with lots of interactive features allowing you to do the maximum work
with the minimum fuss. Of course, for that you need to know what the
shell can do and how, and that\&apos;s what this guide is for.</p>
<p>The most basic basics: I shall assume you have access to a UNIX system,
otherwise the rest of this is not going to be much use. You can also use
zsh under Windows by installing Cygwin, which provides a UNIX-like
environment for programmes --- given the weakness of the standard
Windows command interpreter, this is a good thing to do. There are ports
of older versions of zsh to Windows which run natively, i.e. without a
UNIX environment, although these have a slightly different behaviour in
some respects and I won\&apos;t talk about them further.</p>
<p>I\&apos;ll also assume some basic knowledge of UNIX; you should know how the
filesystem works, i.e. what <code>/home/users/pws/.zshrc</code> and <code>../file</code> mean,
and some basic commands, for example <code>ls</code>, and you should have
experience with using <code>rm</code> to delete completely the wrong file by
accident, and that sort of thing. In something like `<code>rm file</code>\&apos;, I
will often refer to the `command\&apos; (<code>rm</code>, of course) and the
`argument(s)\&apos; (anything else coming after the command which is used by
it), and to the complete thing you typed in one go as the `command
line\&apos;.</p>
<p>You\&apos;re also going to need zsh itself; if you\&apos;re reading this, you may
well already have it, but if you don\&apos;t, you or your system
administrator should read <a href="zshguide08.html#appa">Appendix A</a>. For now,
we\&apos;ll suppose you\&apos;re sitting in front of a terminal with zsh already
running.</p>
<p>Now to the shell. After you log in, you probably see some prompt (a
series of symbols on the screen indicating that you can input a
command), such as `<code>$</code>\&apos; or `<code>%</code>\&apos;, possibly with some other text in
front --- later, we\&apos;ll see how you can change that text in
interesting ways. That prompt comes from the shell. Type
`<code>print hello</code>\&apos;, then backspace over `<code>hello</code>\&apos; and type
`<code>goodbye</code>\&apos;. Now hit the `Return\&apos; key (or `Enter\&apos; key, I\&apos;ll just
say <code>&lt;RET&gt;</code> from now on, likewise <code>&lt;TAB&gt;</code> for the tab key, <code>&lt;SPC&gt;</code> for
the space key); unless you have a serious practical-joker problem on
your system, you will see `<code>goodbye</code>\&apos;, and the shell will come back
with another prompt. All of the time up to when you hit <code>&lt;RET&gt;</code>, you
were interacting with the shell and its editor, called `Z-Shell Line
Editor\&apos; or `zle\&apos; for short; only then did the shell go away and tell
the <code>print</code> command to print out a message. So you can see that the
shell is important.</p>
<p>However, if all you\&apos;re doing is typing simple commands like that, why
do you need anything complicated? In that case, you don\&apos;t; but real
life\&apos;s not that simple. In the rest of this guide, I describe how, with
zsh\&apos;s help, you can:</p>
<ul>
<li>customise the environment in which you work, by using startup files,</li>
<li>write your own commands to shorten tasks and store things in shell
variables (`parameters\&apos;) so you don\&apos;t have to remember them,</li>
<li>use zle to minimise the amount of typing you have to do --- in
zsh, you can even edit small files that way,</li>
<li>pick the files you want to use for a particular command such as <code>mv</code>
or <code>ls</code> using zsh\&apos;s very sophisticated filename generation (known
colloquially as `globbing\&apos;) system,</li>
<li>tell the editor what sort of arguments you use with particular
commands, so that you only need to type part of the name and it will
complete the rest, using zsh\&apos;s unrivalled programmable completion
system,</li>
<li>use the extra add-ons (`modules\&apos;) supplied with the latest version
of zsh to do other things you usually can\&apos;t do in a shell at all.</li>
</ul>
<p>That\&apos;s only a tiny sample. Since there\&apos;s so much to say, this guide
will concentrate on the things zsh does best, and in particular the
things it has which other shells don\&apos;t. The next chapter gives a few of
the basics, by trying to explain how to set the shell up the way you
want it. Like the rest of the guide, it\&apos;s not intended to be
exhaustive, for which you should look at the shell manual.</p>
<p>Some other things you should probably know straight away. First, the
shell is always running, even when the command you typed is running,
too; the shell simply hangs around waiting for it to finish: you may
know from other shells about putting commands in the <strong>background</strong> by
putting an `<code>&amp;</code>\&apos; after the command, which means that the shell
doesn\&apos;t wait for them to finish. The shell is there even if the
command\&apos;s in the foreground, but in this case doing nothing.</p>
<p>Second, it doesn\&apos;t just run other people\&apos;s commands, it has some of
its own, called <strong>builtin commands</strong> or just <strong>builtins</strong>, and you can
even add your own commands as lists of instructions to the shell called
<strong>functions</strong>; builtins and functions always run in the shell itself.
That\&apos;s important to know, because things which don\&apos;t run in the shell
itself can\&apos;t affect it, and hence can\&apos;t alter parameters, functions,
aliases, and all the other things I shall talk about.</p>
<p>[]{#l2}</p>
<h2 id="11-other-shells-and-other-guides">1.1: Other shells and other guides</h2>
<p>If you want a basic grounding in how shells work, what their syntax is
(i.e. how to write commands), and how to write scripts and functions,
you should read one of the many books on the subject. In particular, you
will get most out of a book that describes the Korn shell (ksh), as zsh
is very similar to this --- so similar that it will be worth my while
pointing out differences as we go along, since they can confuse ksh
users. Recent versions of zsh can emulate ksh (strictly, the 1988
version of ksh, although there are increasingly features from the 1993
version) quite closely, although it\&apos;s not perfect, and less perfect the
more closely you look. However, it\&apos;s important to realise that if you
just start up any old zsh there is no guarantee that it will be set up
to work like ksh; unless you or your system adminstrator have changed
some settings, it certainly won\&apos;t be. You might not see that straight
away, but it affects the shell in subtle ways. I will talk about
emulation a bit more later on.</p>
<p>A few other shells are worth mentioning. The grandfather of all UNIX
shells is sh, now known as the Bourne shell but originally just referred
to as `the shell\&apos;. The story is similar to ksh: zsh can emulate sh
quite closely (much more closely than ksh, since sh is considerably
simpler), but in general you need to make sure it\&apos;s set up to do that
before you can be sure it will emulate sh.</p>
<p>You may also come across the `Bourne-Again Shell\&apos;, bash. This is a
freely-available enhancement of sh written by the GNU project --- but
it is not always enhanced along the lines of ksh, and hence in many ways
it is very different from zsh. On some free UNIX-like systems such as
Linux/GNU (which is what people usually mean by Linux), the command sh
is really bash, so there you should be extra careful when trying to
ensure that something which runs under the so-called `sh\&apos; will also
run under zsh. Some Linux systems also have another simpler Bourne shell
clone, ash; as it\&apos;s simpler, it\&apos;s more like the original Bourne shell.</p>
<p>Some more modern operating systems talk about `the POSIX shell\&apos;. This
is an attempt to standardize UNIX shells; it\&apos;s most like the Korn
shell, although, a bit confusingly, it\&apos;s often just called sh, because
the standard says that it should be. Usually, this just means you get a
bit extra free with your sh and it still does what you expect. Zsh has
made some attempts to fit the standard, but you have to tell it to ---
again, simply starting up `zsh\&apos; will not have the right settings for
that.</p>
<p>There is another common family of shells with, unfortunately,
incompatible syntax. The source of this family is the C-Shell, csh, so
called because its syntax looks more like the C programming language.
This became widespread when the only other shell available was sh
because csh had better interactive features, such as job control. It was
then enhanced to make tcsh, which has many of the interactive features
you will also find in zsh, and so became very popular. Despite these
common features, the syntax of zsh is very different, so you should not
try and use csh/tcsh commands beyond the very simplest in zsh; but if
you are a tcsh user, you will find virtually every capability you are
used to in zsh somewhere, plus a lot more.</p>
<p>[]{#l3}</p>
<h2 id="12-versions-of-zsh">1.2: Versions of zsh</h2>
<p>At the time of writing, the most recent version of zsh available for
widespread use was 4.0.6. You will commonly find two sets of older
zsh\&apos;s around. The 3.0 series, of which the last release was 3.0.9, was
a stable release, with only bug fixes since the first release of zsh 3.
The 3.1 series were beta versions, with lots of new features; the last
of these, 3.1.9, was not so different from 4.0.1; the main change is
that the shell has now been declared stable, so that as with zsh 3 there
will be a set of bug fixes, labelled 4.0, and a set with new functions
in, labelled 4.1. As 4.0 replaces all zsh 3 versions, I will try to keep
things simple and talk about that; but every now and then it will be
helpful to point out where older versions were different.</p>
<p>One notable feature of zsh is the completion of command line arguments.
The system changed in 3.1.6 and 3.1.7 to make it a lot more
configurable, and (provided you keep your wits about you) a little less
obscure. I therefore won\&apos;t describe the old completion system, which
used the `compctl\&apos; command, in any detail; a very brief introduction
is given in the zsh FAQ. The old system remains available, however we
strongly recommend new users to start with the new one. See <a href="zshguide06.html#comp">chapter
6</a> `Completion, old and new\&apos; for the lowdown on
new-style completion.</p>
<p>There won\&apos;t be a big difference between 4.0 and 4.1, just bug fixes and
a few evolutionary changes, plus some extra modules. There will be some
notes in <a href="zshguide07.html#ragbag">chapter 7</a> about new features in 4.1,
but nothing you write for 4.0 is likely to become obsolete in the
foreseeable future.</p>
<p>[]{#l4}</p>
<h2 id="13-conventions">1.3: Conventions</h2>
<p>Most of what I say will be reasonably self-contained (which means I use
phrases like `as I said before\&apos; and `as I\&apos;ll discuss later on\&apos; more
than a real stylist would like, and the number times I refer to other
chapters is excessive), but there are some points I should perhaps draw
your attention to before you leap in.</p>
<p>I will often write chunks of code as you would put them in a file for
execution (a `script\&apos; or a `function\&apos;, the differences to be
discussed <em>passim</em>):</p>
<pre><code>  if [[ $ZSH_VERSION = 3.* ]]; then
    print This is a release of the third version of zsh.
  else
    print This is either very new or very old.
  fi
</code></pre><p>but sometimes I will show both what you type into a shell interactively,
and what the shell throws back at you:</p>
<pre><code>  % print $ZSH_VERSION
  3.1.9
  % print $CPUTYPE
  i586
</code></pre><p>Here, `<code>%</code>\&apos; shows the prompt the shell puts up to tell you it is
expecting input (and the space immediately after is part of it).
Actually, you probably see something before the percent sign like the
name of the machine or your user name, or maybe something fancier. I\&apos;ve
pruned it to the minimum to avoid confusion, and kept it as reminder
that this is the line you type.</p>
<p>If you\&apos;re reading an electronic version of this guide, and want to copy
lines with the `<code>%</code>\&apos; in front into a terminal to be executed, there\&apos;s
a neat way of doing this where you don\&apos;t even have to edit the line
first:</p>
<pre><code>  alias %=&apos; &apos;
</code></pre><p>Then <code>%</code> at the start of a line is turned into nothing whatsoever; the
space just indicates that any following aliases should be expanded. So
the line `<code>% print $CPUTYPE</code>\&apos; will ignore the `<code>%</code>\&apos; and execute the
rest of the line. (I hope it\&apos;s obvious, but your <em>own</em> prompt is always
ignored; this is just if you copy the prompts from the guide into the
shell.)</p>
<p>There are lots of different types of object in zsh, but one of the most
common is parameters, which I will always show with a `<code>$</code>\&apos; sign in
front, like `<code>$ZSH_VERSION</code>\&apos;, to remind you they are parameters. You
need to remember that when you\&apos;re setting or fiddling with the
parameter itself, rather than its value, you omit the `<code>$</code>\&apos;. When you
do and don\&apos;t need it should become clearer as we go along.</p>
<p>The other objects I\&apos;ll show specially are shell options --- choices
about how the shell is to work --- which I write like this:
`<code>SH_WORD_SPLIT</code>\&apos;, `<code>NO_NOMATCH</code>\&apos;, `<code>ZLE</code>\&apos;. Again, that\&apos;s not the
whole story since whenever the shell expects options you can write them
in upper or lower case with as many or as few underscores as you like;
and often in code chunks I\&apos;ll use the simplest form instead:
`<code>shwordsplit</code>\&apos;, `<code>nonomatch</code>\&apos;, `<code>zle</code>\&apos;. If you\&apos;re philosophical
you can think of it as expressing the category difference between
talking about programming and actual programming, but really it\&apos;s just
me being inconsistent.</p>
<p>You may find it odd that I use three hyphens to signify a dash. That\&apos;s
actually a convention used in the printed version of this guide, which
is made with LaTeX. One day, I will turn this into a macro and it will
appear properly in other versions; but then, one day the universe will
come to an end.</p>
<p>[]{#l5}</p>
<h2 id="14-acknowledgments">1.4: Acknowledgments</h2>
<p>I am grateful for comments from various zsh users. In particular, I have
had detailed comments and corrections from Bart Schaefer, Sven `Mr
Completion\&apos; Wischnowsky and Oliver Kiddle. It\&apos;s usual to add that any
remaining errors are my own, but that\&apos;s so stark staringly obvious as
to be ridiculous. I mean, who wrote this? Never mind.</p>
<p>Most of this written on one or another release of Linux Mandrake (a
derivative of Red Hat), with the usual GNU and XFree86 tools. Since all
of this was free, it only seems fair to say `thank you\&apos; for the gift.
It also works a lot better than the operating system that came with this
particular PC.</p>
<hr>
<ul>
<li><a href="zshguide.html">Table of Contents</a></li>
<li><a href="zshguide02.html">Next Chapter</a></li>
</ul>
<hr>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="zshguide.html" class="navigation navigation-prev " aria-label="Previous page: 目录">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="zshguide02.html" class="navigation navigation-next " aria-label="Next page: 章节 2">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"章节 1","level":"1.3","depth":1,"next":{"title":"章节 2","level":"1.4","depth":1,"path":"zshguide02.md","ref":"zshguide02.md","articles":[]},"previous":{"title":"目录","level":"1.2","depth":1,"path":"zshguide.md","ref":"zshguide.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"zshguide01.md","mtime":"2021-02-08T03:25:42.467Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-08T04:43:25.916Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

